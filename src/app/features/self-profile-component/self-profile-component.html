
<main>
  <section class="top-section">
    <!-- Image de profil -->
    <div class="img-container">
      <img [src]="(user$ | async)?.imgUrl" alt="Profile Image">
      <button class="edit-btn" (click)="editField('imgUrl')">✏️</button>
      <input *ngIf="editing.imgUrl" type="file" (change)="onFileSelected($event)">
    </div>

    <!-- Nom -->
    <h1>{{ (user$ | async)?.name }}</h1>

    <!-- Traits -->
    <div class="traits-container">
      <p *ngFor="let trait of (user$ | async)?.traits; let i = index">
        {{ trait }}
        <button class="edit-btn" (click)="editTrait(i)">✏️</button>
      </p>
      <div *ngIf="editing.traits">
        <input [(ngModel)]="newTrait" placeholder="Nouveau trait">
        <button (click)="addTrait()">Ajouter</button>
      </div>
    </div>
  </section>

  <!-- Bio -->
  <div class="bio-section">
    <p *ngIf="!editing.bio">{{ (user$ | async)?.bio }}</p>
    <textarea *ngIf="editing.bio" [(ngModel)]="edited.bio"></textarea>
    <button class="edit-btn" (click)="toggleEdit('bio')">✏️</button>
  </div>

  <!-- Infos -->
  <div id="infos">
    <div class="info">
      <h2>Location</h2>
      <p *ngIf="!editing.city">{{ (user$ | async)?.city }}</p>
      <input *ngIf="editing.city" [(ngModel)]="edited.city">
      <button class="edit-btn" (click)="toggleEdit('city')">✏️</button>
    </div>

    <div class="info">
      <h2>Utilisateur depuis</h2>
      <p>{{ (user$ | async)?.createdAt | date }}</p>
    </div>
  </div>

  <button *ngIf="hasEdits()" (click)="saveProfile()">Enregistrer</button>
</main>
