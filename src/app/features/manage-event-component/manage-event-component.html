<h1>Événement n° {{ (currentEvent$| async )?.id }}</h1>

<div class="event-info">
  <p><strong>Organisateur :</strong> {{ (currentEvent$| async )?.ownerId }}</p>
  <p><strong>Date :</strong> {{ (currentEvent$| async )?.date | date:'short' }}</p>
  <p><strong>Lieu :</strong> {{ (currentEvent$| async )?.place }} ({{ (currentEvent$| async )?.city }})</p>
  <p><strong>Participants :</strong> {{ (currentEvent$| async )?.participants }} / {{ (currentEvent$| async )?.maxParticipants }}</p>
</div>

@if (isOwner$ | async) {
  <div class="owner-controls">
    <button (click)="cancelEvent()">Annuler l'événement</button>
  </div>
}

<div class="participants-container">
  <h2>Participants</h2>
  @for (user of (eventUsers$| async ); track $index) {
    <div class="participant-item">
      @if (user.id !== (currentEvent$| async )?.ownerId) {
        <p>{{ user.name }}</p>
        @if (isOwner$ | async) {
          <button (click)="kickUser(user.id)">Exclure</button>
        }
      } @else {
        <p><strong>{{ user.name }} (Organisateur)</strong></p>
      }
    </div>
  }
</div>

<app-chat-box [messages$]="eventMessages$" [currentUserId]="(currentUser$| async )!.id"></app-chat-box>

